{"ast":null,"code":"import { takeLatest, put, select } from 'redux-saga/effects';\nimport { FETCH_CATEGORIES, IS_LIKE_CATEGORY } from './constants';\nimport * as actionsSidebar from './actions';\nimport * as categoriesApi from '../../api/categories';\nimport { Auth_NicknameSelector, Auth_AccessTokenSelector } from '../Auth/selectors';\nimport { displayNotification } from '../Notifications/actions';\nexport default function* categoryListSaga() {\n  yield takeLatest(FETCH_CATEGORIES, fetchCategories);\n}\nexport function* fetchCategories() {\n  try {\n    const tokenSelector = yield select(Auth_AccessTokenSelector);\n    const categories = yield categoriesApi.get(tokenSelector);\n    yield put(actionsSidebar.fetchCategoriesSuccess(categories));\n  } catch (error) {\n    yield put(displayNotification({\n      message: error,\n      type: 'error'\n    }));\n  }\n}\nexport function* setLikeCategory() {\n  yield takeLatest(IS_LIKE_CATEGORY, pathLikeCategory);\n}\nexport function* pathLikeCategory(actions) {\n  const nicknameSelector = yield select(Auth_NicknameSelector);\n  const tokenSelector = yield select(Auth_AccessTokenSelector);\n  const data = { ...actions.payload,\n    nickname: nicknameSelector,\n    token: tokenSelector\n  };\n\n  try {\n    yield categoriesApi.patch(data);\n    yield put(displayNotification({\n      message: 'Your favorites categories has changed!'\n    }));\n    yield put(actionsSidebar.fetchCategories());\n  } catch (error) {\n    yield put(displayNotification({\n      message: error,\n      type: 'error'\n    }));\n  }\n}","map":{"version":3,"sources":["C:/Users/MircoFiocchi/Desktop/BroadcastApp/client/src/containers/SideBar/saga.js"],"names":["takeLatest","put","select","FETCH_CATEGORIES","IS_LIKE_CATEGORY","actionsSidebar","categoriesApi","Auth_NicknameSelector","Auth_AccessTokenSelector","displayNotification","categoryListSaga","fetchCategories","tokenSelector","categories","get","fetchCategoriesSuccess","error","message","type","setLikeCategory","pathLikeCategory","actions","nicknameSelector","data","payload","nickname","token","patch"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,MAA1B,QAAwC,oBAAxC;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,QAAmD,aAAnD;AACA,OAAO,KAAKC,cAAZ,MAAgC,WAAhC;AACA,OAAO,KAAKC,aAAZ,MAA+B,sBAA/B;AACA,SACEC,qBADF,EAEEC,wBAFF,QAGO,mBAHP;AAIA,SAASC,mBAAT,QAAoC,0BAApC;AACA,eAAe,UAAUC,gBAAV,GAA6B;AAC1C,QAAMV,UAAU,CAACG,gBAAD,EAAmBQ,eAAnB,CAAhB;AACD;AAED,OAAO,UAAUA,eAAV,GAA4B;AACjC,MAAI;AACF,UAAMC,aAAa,GAAG,MAAMV,MAAM,CAACM,wBAAD,CAAlC;AACA,UAAMK,UAAU,GAAG,MAAMP,aAAa,CAACQ,GAAd,CAAkBF,aAAlB,CAAzB;AACA,UAAMX,GAAG,CAACI,cAAc,CAACU,sBAAf,CAAsCF,UAAtC,CAAD,CAAT;AACD,GAJD,CAIE,OAAOG,KAAP,EAAc;AACd,UAAMf,GAAG,CAACQ,mBAAmB,CAAC;AAAEQ,MAAAA,OAAO,EAAED,KAAX;AAAkBE,MAAAA,IAAI,EAAE;AAAxB,KAAD,CAApB,CAAT;AACD;AACF;AAED,OAAO,UAAUC,eAAV,GAA4B;AACjC,QAAMnB,UAAU,CAACI,gBAAD,EAAmBgB,gBAAnB,CAAhB;AACD;AAED,OAAO,UAAUA,gBAAV,CAA2BC,OAA3B,EAAoC;AACzC,QAAMC,gBAAgB,GAAG,MAAMpB,MAAM,CAACK,qBAAD,CAArC;AACA,QAAMK,aAAa,GAAG,MAAMV,MAAM,CAACM,wBAAD,CAAlC;AACA,QAAMe,IAAI,GAAG,EACX,GAAGF,OAAO,CAACG,OADA;AAEXC,IAAAA,QAAQ,EAAEH,gBAFC;AAGXI,IAAAA,KAAK,EAAEd;AAHI,GAAb;;AAKA,MAAI;AACF,UAAMN,aAAa,CAACqB,KAAd,CAAoBJ,IAApB,CAAN;AACA,UAAMtB,GAAG,CACPQ,mBAAmB,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CADZ,CAAT;AAGA,UAAMhB,GAAG,CAACI,cAAc,CAACM,eAAf,EAAD,CAAT;AACD,GAND,CAME,OAAOK,KAAP,EAAc;AACd,UAAMf,GAAG,CAACQ,mBAAmB,CAAC;AAAEQ,MAAAA,OAAO,EAAED,KAAX;AAAkBE,MAAAA,IAAI,EAAE;AAAxB,KAAD,CAApB,CAAT;AACD;AACF","sourcesContent":["import { takeLatest, put, select } from 'redux-saga/effects';\r\nimport { FETCH_CATEGORIES, IS_LIKE_CATEGORY } from './constants';\r\nimport * as actionsSidebar from './actions';\r\nimport * as categoriesApi from '../../api/categories';\r\nimport {\r\n  Auth_NicknameSelector,\r\n  Auth_AccessTokenSelector,\r\n} from '../Auth/selectors';\r\nimport { displayNotification } from '../Notifications/actions';\r\nexport default function* categoryListSaga() {\r\n  yield takeLatest(FETCH_CATEGORIES, fetchCategories);\r\n}\r\n\r\nexport function* fetchCategories() {\r\n  try {\r\n    const tokenSelector = yield select(Auth_AccessTokenSelector);\r\n    const categories = yield categoriesApi.get(tokenSelector);\r\n    yield put(actionsSidebar.fetchCategoriesSuccess(categories));\r\n  } catch (error) {\r\n    yield put(displayNotification({ message: error, type: 'error' }));\r\n  }\r\n}\r\n\r\nexport function* setLikeCategory() {\r\n  yield takeLatest(IS_LIKE_CATEGORY, pathLikeCategory);\r\n}\r\n\r\nexport function* pathLikeCategory(actions) {\r\n  const nicknameSelector = yield select(Auth_NicknameSelector);\r\n  const tokenSelector = yield select(Auth_AccessTokenSelector);\r\n  const data = {\r\n    ...actions.payload,\r\n    nickname: nicknameSelector,\r\n    token: tokenSelector,\r\n  };\r\n  try {\r\n    yield categoriesApi.patch(data);\r\n    yield put(\r\n      displayNotification({ message: 'Your favorites categories has changed!' })\r\n    );\r\n    yield put(actionsSidebar.fetchCategories());\r\n  } catch (error) {\r\n    yield put(displayNotification({ message: error, type: 'error' }));\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}